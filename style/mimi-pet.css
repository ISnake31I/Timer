/* ГЛАВНЫЙ КОНТЕЙНЕР (КУБ) */
#mimi-box {
    width: 60px;
    height: 60px;
    position: fixed;
    z-index: 1000;
    cursor: pointer;
    /* Физика переката */
    transition: left 0.8s cubic-bezier(0.5, 1.5, 0.6, 1), 
                top 0.8s cubic-bezier(0.5, 1.5, 0.6, 1), 
                transform 0.8s cubic-bezier(0.5, 1.5, 0.6, 1);
    transform-origin: center;
}

/* ТЕЛО КУБА */
.mimi-frame {
    width: 100%;
    height: 100%;
    border: 2px solid #8A2BE2;
    background: rgba(138, 43, 226, 0.05);
    box-shadow: inset 0 0 15px rgba(138, 43, 226, 0.3),
                0 0 20px rgba(138, 43, 226, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.4s ease;
    border-radius: 15%;
}

/* ГЛАЗА (СТАБИЛИЗАЦИЯ) */
.mimi-eyes {
    display: flex;
    gap: 15px;
    transform-origin: center;
    transition: transform 0.8s cubic-bezier(0.5, 1.5, 0.6, 1);
}

.eye {
    width: 12px;
    height: 12px;
    background: #fff;
    border-radius: 2px;
    box-shadow: 0 0 10px #fff;
    transition: all 0.2s ease;
}

/* ОБЛАЧКО (ДЕКОР И ПЕРЕХОДЫ) */
.mimi-bubble {
    position: absolute;
    /* Убираем жесткую привязку к bottom и left */
    display: inline-block;
    background: rgba(128, 0, 32, 0.95); 
    color: #fff;
    padding: 6px 12px;
    border-radius: 8px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    z-index: 2000;
    /* Только плавность появления */
    transition: opacity 0.3s ease, bottom 0.3s ease, left 0.3s ease, right 0.3s ease;
    transform: rotate(0deg) !important; /* Запрещаем наследовать вращение */
}

/* ПОКАЗЫВАЕМ ОБЛАЧКО */
.speaking .mimi-bubble { 
    opacity: 1; 
}

/* ЭМОЦИИ */
.blink .eye { height: 2px; margin-top: 5px; }
.happy .eye { border-radius: 50% 50% 0 0; height: 8px; }

.offended .eye {
    height: 3px;
    background: #ff4d4d !important;
    box-shadow: 0 0 10px #ff4d4d !important;
}
.offended .eye.left { transform: rotate(15deg); }
.offended .eye.right { transform: rotate(-15deg); }

/* Анимация ярости */
@keyframes mimiAnger {
    0% { box-shadow: 0 0 10px #ff4d4d; }
    50% { box-shadow: 0 0 30px #800020; }
    100% { box-shadow: 0 0 10px #ff4d4d; }
}
.offended { animation: mimiAnger 1s infinite alternate !important; }

/* =============================== */

@media (max-width: 480px) {
    #mimi-box {
        width: 45px; /* Уменьшаем кубик для телефонов */
        height: 45px;
    }
    .eye {
        width: 8px; /* И глазки тоже */
        height: 8px;
    }
    .mimi-bubble {
        font-size: 10px;
        bottom: 60px;
    }
}